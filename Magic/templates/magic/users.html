{% extends 'magic/base.html' %}
{% block title %} Users {% endblock %}
{% block body %}

<div class=""> <!--class="row"-->
    {% if all_users %}
    <h1 class="basic-text">Users</h2>
        <table id="user-table">
            <tr>
                <th><h2><span class="glyphicon glyphicon-user"></span></h2></th>
                <th><h2>Name</h2></th>
                <th><h2>Available Cards</h2></th>
            </tr>
            {% for user in users %}
            <tr>
                <!--user profile image-->
                <td class="img-td user-img-td">
                    <img src="{{ user.profile.user_photo.url }}" class="img-responsive" width=25%>
                </td>                  
                <td class="user-td">
                    <h3><b><a class="user-td-link" href="{% url 'Magic:user_detail' user.id %}">{{user.get_username}}</a></b></h3>
                </td>
                <td>
                    Available Cards: {{user.card_set.count}}
                </td>
            </tr>
            {% endfor %}
        </table>
        {% if users.has_other_pages %}
            <div class="center">
                <ul class="pagination pagination-lg">
                    {% if users.has_previous %}
                        <li><a href="?page={{ users.previous_page_number }}">&laquo;</a></li>
                    {% else %}
                        <li class="disabled"><span>&laquo;</span></li>
                    {% endif %}
                    {% for i in users.paginator.page_range %}
                        {% if users.number == i %}
                            <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
                        {% else %}
                            <li><a href="?page={{ i }}">{{ i }}</a></li>
                        {% endif %}
                    {% endfor %}
                    {% if users.has_next %}
                        <li><a href="?page={{ users.next_page_number }}">&raquo;</a></li>
                    {% else %}
                        <li class="disabled"><span>&raquo;</span></li>
                    {% endif %}
                </ul>
            </div>
        {% endif %}

    {% else %}
        <h4 class="basic-text">No users registered yet. Click <a href="{% url 'register' %}">here</a> to register</h4>
    {% endif %}

</div>
    
{% endblock %}