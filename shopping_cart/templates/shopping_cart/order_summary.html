{% extends 'magic/base.html' %}
{% block body %}
  <div class="container">
    <div class="table-responsive text-nowrap">
      <h2 class="basic-text">Order Summary</h2>
      <table class="table is-hoverable">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Card Name</th>
            <th scope="col">Price</th>
            <!-- <th scope="col">Quantity</th>
            <th scope="col">Total Card Price</th> -->
          </tr>
          {% for order_item in order.items.all %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ order_item.card.name }}</td>
            <td>
              {{ order_item.card.price }} Ft
              <a href="{% url 'Magic:delete_from_cart' order_item.id %}">
                <span class="glyphicon glyphicon-trash">
                  <svg color="red" width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-cart-x" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm7 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"/>
                    <path fill-rule="evenodd" d="M6.646 5.646a.5.5 0 0 1 .708 0L8.5 6.793l1.146-1.147a.5.5 0 0 1 .708.708L9.207 7.5l1.147 1.146a.5.5 0 0 1-.708.708L8.5 8.207 7.354 9.354a.5.5 0 1 1-.708-.708L7.793 7.5 6.646 6.354a.5.5 0 0 1 0-.708z"/>
                  </svg>
                </span>
              </a></td>
          </tr>
          {% endfor %}
          <tr>
            <td colspan="2"><strong>Order Total:</strong></td>
            <td><strong>{{ order.get_cart_total }} Ft</strong></td>
          </tr>
          {% if order.get_cart_total > 0 %}
            <tr>
              <td colspan="3">
                <a class="btn btn-danger" href="{% url 'Magic:cards' %}">Back to shopping</a>
                <a class="btn btn-success btn-checkout" href="{% url 'Magic:checkout' %}">Proceed to checkout</a>
              </td>
            </tr>
          {% else %}
            <tr>
              <td colspan="3"><b>Your cart is empty</b></td>
            </tr>
            <tr>
              <td colspan="3">
                <a class="btn btn-danger" href="{% url 'Magic:cards' %}">Back to shopping</a>
              </td>
            </tr>
          {% endif %}
          

      </table>
    
    </div>

  </div>
{% endblock %}

